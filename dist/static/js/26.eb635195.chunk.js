(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1475:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"g",function(){return m}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"h",function(){return p}),n.d(t,"e",function(){return b}),n.d(t,"f",function(){return g});var a=n(5),o=n(31),i=(n(419),n(56)),r=n.n(i),l=n(93),s=n(24),c=function(e){return function(t){r.a.auth().onAuthStateChanged(function(n){n&&(console.log(n.uid),r.a.firestore().collection("users").doc(n.uid).get().then(function(i){console.log(i.data());var r=i.data().displayName;console.log(r);var l={uid:n.uid,displayName:r},s=o.a.firestore().collection("informations").doc().id;o.a.firestore().collection("informations").doc(s).set(Object(a.a)({},e,{id:s,authorName:l.displayName,authorId:l.uid,createdAt:new Date})).then(function(){t({type:"Add_INFORMATION"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},m=function(e){return function(t){o.a.firestore().collection("informations").doc(e).delete().then(function(e){e||l.a.dispatch(s.j({message:"Cette information a \xe9t\xe9 supprim\xe9e"}))})}},d=[],u=function(){return function(e){r.a.auth().onAuthStateChanged(function(t){t&&(console.log(t.uid),r.a.firestore().collection("users").doc(t.uid).get().then(function(n){console.log(n.data());var i=n.data().displayName;console.log(i);t.uid===d.authorId&&o.a.firestore().collection("informations").get().then(function(t){return t.forEach(function(e){var t=Object(a.a)({},e.data(),{id:e.id});d.push(t)}),e(f(d)),d}).catch(function(e){console.error("Error writing document: ",e)})}))})}},f=function(e){return{type:"GET_ALL_INFORMATIONS_SUCCESS",payload:e}};function h(e){return{type:"EDIT_INFORMATION_ITEM",information:e}}var p=function(e){return function(t){o.a.firestore().collection("informations").doc(e.id).update(Object(a.a)({},e)).then(function(){t({type:"UPDATE_INFORMATION"})}).catch(function(e){console.error("Error updating document: ",e)})}};function b(){return{type:"OPEN_EDIT_INFORMATION"}}function g(){return console.log("action"),{type:"OPEN_NEW_INFORMATION"}}},1562:function(e,t,n){"use strict";n.r(t);var a=n(34),o=n(11),i=n(12),r=n(14),l=n(13),s=n(15),c=n(0),m=n.n(c),d=n(1),u=n(16),f=n(82),h=n(30),p=(n(9),n(21)),b=(n(129),n(1475)),g=function(e){function t(){var e,n;Object(o.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={id:"",nom:"","pr\xe9nom":"",desc:"",adresse:"",tel:"",email:""},n.updateFormationState=function(){if("ajouter"===n.props.match.params.forminfosId)n.setState({id:"",nom:"","pr\xe9nom":"",desc:"",adresse:"",tel:"",email:""});else{var e=n.props.informationItem;n.setState({id:e.id,nom:e.nom,"pr\xe9nom":e.pr\u00e9nom,desc:e.desc,adresse:e.adresse,tel:e.tel,email:e.email})}},n.handleChange=function(e){n.setState(Object(a.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){console.log(n.state),n.props.addInformation(n.state),n.setState({id:"",nom:"","pr\xe9nom":"",desc:"",adresse:"",tel:"",email:""})},n.handleUpdate=function(){console.log(n.state),n.props.updateInformation(n.state),n.setState({id:"",nom:"","pr\xe9nom":"",desc:"",adresse:"",tel:"",email:""})},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateFormationState(),console.log("je trouve",this.props.formationItem)}},{key:"componentDidUpdate",value:function(e,t,n){if("edit"===this.props.match.params.forminfosId){var a=this.props.informationItem;this.setState({id:a.id,nom:a.nom,"pr\xe9nom":a.pr\u00e9nom,desc:a.desc,adresse:a.adresse,tel:a.tel,email:a.email})}}},{key:"render",value:function(){return this.props.auth.uid?m.a.createElement(u.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:m.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},m.a.createElement("div",{className:"flex flex-col items-start max-w-full"},m.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},m.a.createElement(d.fb,{className:"normal-case flex items-center sm:mb-12",component:h.a,role:"button",to:"/profile"},m.a.createElement(d.w,{className:"mr-4 text-20"},"arrow_back"),"Retour")),m.a.createElement("div",{className:"flex items-center max-w-full"},m.a.createElement("div",{className:"flex flex-col min-w-0"},m.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},m.a.createElement(d.fb,{variant:"caption"},"Informations  G\xe9n\xe9rales"))))),m.a.createElement("div",null,m.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},"ajouter"===this.props.match.params.forminfosId?m.a.createElement(d.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleSubmit},"Save"):m.a.createElement(d.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleUpdate,component:h.a,to:"/profile"},"Update")))),content:m.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},m.a.createElement("form",null,m.a.createElement(u.a,{animation:"transition.bounceUpIn",delay:1200},m.a.createElement(d.cb,{value:this.state.nom,id:"nom",label:"Nom",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"nom",fullWidth:!0,required:!0})),m.a.createElement(u.a,{animation:"transition.bounceUpIn",delay:1e3},m.a.createElement(d.cb,{className:"mt-8 mb-16",id:"pr\xe9nom",name:"pr\xe9nom",onChange:this.handleChange,label:"Pr\xe9nom",type:"text",value:this.state.pr\u00e9nom,multiline:!0,variant:"outlined",fullWidth:!0})),m.a.createElement(u.a,{animation:"transition.bounceUpIn",delay:800},m.a.createElement(d.cb,{className:"mt-8 mb-16",id:"desc",name:"desc",onChange:this.handleChange,label:"Description",type:"text",value:this.state.desc,multiline:!0,rows:5,variant:"outlined",fullWidth:!0})),m.a.createElement(u.a,{animation:"transition.bounceUpIn",delay:1200},m.a.createElement(d.cb,{value:this.state.adresse,id:"adresse",label:"Adresse",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"adresse",fullWidth:!0,required:!0})),m.a.createElement(u.a,{animation:"transition.bounceUpIn",delay:1e3},m.a.createElement(d.cb,{className:"mt-8 mb-16",id:"tel",name:"tel",onChange:this.handleChange,label:"T\xe9l\xe9phone",type:"number",value:this.state.tel,multiline:!0,variant:"outlined",fullWidth:!0})),m.a.createElement(u.a,{animation:"transition.bounceUpIn",delay:800},m.a.createElement(d.cb,{className:"mt-8 mb-16",id:"email",name:"email",onChange:this.handleChange,label:"Email",type:"email",value:this.state.email,variant:"outlined",fullWidth:!0})))),innerScroll:!0}):m.a.createElement(f.a,{to:"/Login"})}}]),t}(c.Component);t.default=Object(p.b)(function(e){return console.log(e),{allInformations:e.infoReducer.allInformations,informations:e.firestore.ordered.informations,informationItem:e.infoReducer.informationItem,auth:e.firebase.auth}},{updateInformation:b.h,addInformation:b.b,getAllInformations:b.c})(g)}}]);