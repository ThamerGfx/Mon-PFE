(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1446:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(31),i=function(){return function(e){n.a.auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})}}},1447:function(e,t,a){"use strict";a.d(t,"c",function(){return c}),a.d(t,"f",function(){return u}),a.d(t,"b",function(){return d}),a.d(t,"d",function(){return h}),a.d(t,"e",function(){return p}),a.d(t,"a",function(){return f}),a.d(t,"g",function(){return E});var n=a(5),i=a(31),r=(a(419),a(56)),s=a.n(r),o=a(93),l=a(24),c=function(e){return function(t){s.a.auth().onAuthStateChanged(function(a){a&&(console.log(a.uid),s.a.firestore().collection("users").doc(a.uid).get().then(function(r){console.log(r.data());var s=r.data().displayName;console.log(s);var o={uid:a.uid,displayName:s},l=i.a.firestore().collection("r\xe9seaux").doc().id;i.a.firestore().collection("r\xe9seaux").doc(l).set(Object(n.a)({},e,{id:l,authorName:o.displayName,authorId:o.uid,createdAt:new Date})).then(function(){t({type:"Add_RESEAU"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},u=function(e){return function(t){i.a.firestore().collection("r\xe9seaux").doc(e).delete().then(function(e){e||o.a.dispatch(l.j({message:"Ce r\xe9seau a \xe9t\xe9 supprim\xe9"}))})}},d=function(){return{type:"OPEN_DIALOG_RESEAU"}};var m=[],h=function(){return function(e){i.a.firestore().collection("r\xe9seaux").get().then(function(t){return t.forEach(function(e){var t=Object(n.a)({},e.data(),{id:e.id});m.push(t)}),e(p(m)),m}).catch(function(e){console.error("Error writing document: ",e)})}},p=function(e){return{type:"GET_ALL_RESEAUX_SUCCESS",payload:e}};function f(e){return{type:"EDIT_RESEAU_ITEM","r\xe9seau":e}}var E=function(e){return function(t){i.a.firestore().collection("r\xe9seaux").doc(e.id).update(Object(n.a)({},e)).then(function(){t({type:"UPDATE_RESEAU"})}).catch(function(e){console.error("Error updating document: ",e)})}}},1551:function(e,t,a){"use strict";a.r(t);var n=a(34),i=a(11),r=a(12),s=a(14),o=a(13),l=a(15),c=a(0),u=a.n(c),d=a(1),m=a(16),h=a(82),p=a(30),f=(a(9),a(21)),E=a(1447),_=a(1446),g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={id:"",nom_res:"",adresse_res:"",longitude:"",latitude:"",SIREN:"",contact_tel:"",contact_email:""},a.updateR\u00e9seauState=function(){var e=a.props.match.params.reseauId;if("r\xe9seau"===e)a.setState({id:"",nom_res:"",adresse_res:"",SIREN:"",contact_tel:"",contact_email:"",longitude:"",latitude:""});else{var t=a.props.r\u00e9seauItem;a.setState({id:e,nom_res:t.nom_res,adresse_res:t.adresse_res,longitude:t.longitude,latitude:t.latitude,SIREN:t.SIREN,contact_tel:t.contact_tel,contact_email:t.contact_email})}},a.handleSaveR\u00e9seau=function(){a.props.addR\u00e9seau(a.state),a.setState({id:"",nom_res:"",adresse_res:"",SIREN:"",contact_tel:"",contact_email:"",longitude:"",latitude:""})},a.handleUpdateR\u00e9seau=function(){a.props.updateR\u00e9seau(a.state),a.setState({id:"",nom_res:"",adresse_res:"",SIREN:"",contact_tel:"",contact_email:"",longitude:"",latitude:""})},a.handleChange=function(e){a.setState(Object(n.a)({},e.target.id,e.target.value))},a.handleSignOut=function(){a.props.signOut()},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateR\u00e9seauState(),console.log("je trouve",this.props.r\u00e9seauItem)}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.match.params.reseauId;if("edit"===n){var i=this.props.r\u00e9seauItem;this.setState({id:n,nom_res:i.nom_res,adresse_res:i.adresse_res,longitude:i.longitude,latitude:i.latitude,SIREN:i.SIREN,contact_tel:i.contact_tel,contact_email:i.contact_email})}}},{key:"render",value:function(){return this.props.auth.uid?u.a.createElement(m.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:u.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},u.a.createElement("div",{className:"flex flex-col items-start max-w-full"},u.a.createElement(m.a,{animation:"transition.slideRightIn",delay:300},u.a.createElement(d.fb,{className:"normal-case flex items-center sm:mb-12",component:p.a,role:"button",to:"/r\xe9seaux"},u.a.createElement(d.w,{className:"mr-4 text-20"},"arrow_back"),"R\xe9seaux")),u.a.createElement("div",{className:"flex items-center max-w-full"},u.a.createElement("div",{className:"flex flex-col min-w-0"},u.a.createElement(m.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(d.fb,{className:"text-16 sm:text-20 truncate"},this.state.nom_res?this.state.nom_res:"Nouveau R\xe9seau")),u.a.createElement(m.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(d.fb,{variant:"caption"},"R\xe9seau Details"))))),u.a.createElement("div",null,u.a.createElement(m.a,{animation:"transition.slideRightIn",delay:300},"r\xe9seau"===this.props.match.params.reseauId?u.a.createElement(d.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleSaveR\u00e9seau},"Save"):u.a.createElement(d.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleUpdateR\u00e9seau,component:p.a,to:"/r\xe9seaux"},"Update")),u.a.createElement(m.a,{animation:"transition.perspectiveDownIn",delay:500},u.a.createElement(d.c,{onClick:this.handleSignOut,component:p.a,to:"/Login"},"Log Out")))),contentToolbar:u.a.createElement("div",{className:"px-24"},u.a.createElement(m.a,{animation:"transition.perspectiveUpIn",delay:500},"r\xe9seau"===this.props.match.params.reseauId?u.a.createElement("h4",null," Nouveau R\xe9seau "):u.a.createElement("h4",null," R\xe9seau details "))),content:u.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},u.a.createElement("form",null,u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:1200},u.a.createElement(d.cb,{value:this.state.nom_res,id:"nom_res",label:"Nom",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"nom_res",fullWidth:!0,required:!0})),u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:1e3},u.a.createElement(d.cb,{className:"mt-8 mb-16",id:"adresse_res",name:"adresse_res",onChange:this.handleChange,label:"Adresse",type:"text",value:this.state.adresse_res,multiline:!0,variant:"outlined",fullWidth:!0})),u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:800},u.a.createElement(d.cb,{className:"mt-8 mb-16",id:"longitude",name:"longitude",onChange:this.handleChange,label:"Longitude",type:"text",value:this.state.longitude,variant:"outlined",fullWidth:!0})),u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:800},u.a.createElement(d.cb,{className:"mt-8 mb-16",id:"latitude",name:"latitude",onChange:this.handleChange,label:"Latitude",type:"text",value:this.state.latitude,variant:"outlined",fullWidth:!0})),u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:800},u.a.createElement(d.cb,{className:"mt-8 mb-16",id:"SIREN",name:"SIREN",onChange:this.handleChange,label:"SIREN",type:"text",value:this.state.SIREN,variant:"outlined",fullWidth:!0})),u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:600},u.a.createElement(d.cb,{className:"mt-8 mb-16",id:"contact_tel",name:"contact_tel",onChange:this.handleChange,label:"T\xe9l\xe9phone",type:"text",value:this.state.contact_tel,variant:"outlined",fullWidth:!0})),u.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:400},u.a.createElement(d.cb,{className:"mt-8 mb-16",id:"contact_email",name:"contact_email",onChange:this.handleChange,label:"Email",type:"text",value:this.state.contact_email,variant:"outlined",fullWidth:!0})))),innerScroll:!0}):u.a.createElement(h.a,{to:"/Login"})}}]),t}(c.Component);t.default=Object(f.b)(function(e){return console.log(e),{"allR\xe9seaux":e.r\u00e9seauReducer.allR\u00e9seaux,"r\xe9seaux":e.firestore.ordered.r\u00e9seaux,"r\xe9seauItem":e.r\u00e9seauReducer.r\u00e9seauItem,auth:e.firebase.auth}},{"addR\xe9seau":E.c,"getAllR\xe9seaux":E.d,"updateR\xe9seau":E.g,signOut:_.a})(g)}}]);