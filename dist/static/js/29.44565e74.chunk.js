(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1447:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return p}),n.d(t,"g",function(){return E});var a=n(5),r=n(31),c=(n(419),n(56)),o=n.n(c),l=n(93),i=n(24),s=function(e){return function(t){o.a.auth().onAuthStateChanged(function(n){n&&(console.log(n.uid),o.a.firestore().collection("users").doc(n.uid).get().then(function(c){console.log(c.data());var o=c.data().displayName;console.log(o);var l={uid:n.uid,displayName:o},i=r.a.firestore().collection("r\xe9seaux").doc().id;r.a.firestore().collection("r\xe9seaux").doc(i).set(Object(a.a)({},e,{id:i,authorName:l.displayName,authorId:l.uid,createdAt:new Date})).then(function(){t({type:"Add_RESEAU"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},u=function(e){return function(t){r.a.firestore().collection("r\xe9seaux").doc(e).delete().then(function(e){e||l.a.dispatch(i.j({message:"Ce r\xe9seau a \xe9t\xe9 supprim\xe9"}))})}},d=function(){return{type:"OPEN_DIALOG_RESEAU"}};var m=[],f=function(){return function(e){r.a.firestore().collection("r\xe9seaux").get().then(function(t){return t.forEach(function(e){var t=Object(a.a)({},e.data(),{id:e.id});m.push(t)}),e(h(m)),m}).catch(function(e){console.error("Error writing document: ",e)})}},h=function(e){return{type:"GET_ALL_RESEAUX_SUCCESS",payload:e}};function p(e){return{type:"EDIT_RESEAU_ITEM","r\xe9seau":e}}var E=function(e){return function(t){r.a.firestore().collection("r\xe9seaux").doc(e.id).update(Object(a.a)({},e)).then(function(){t({type:"UPDATE_RESEAU"})}).catch(function(e){console.error("Error updating document: ",e)})}}},1573:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n(12),c=n(14),o=n(13),l=n(15),i=n(0),s=n.n(i),u=n(16),d=n(34),m=n(1),f=n(21),h=n(18),p=(n(9),n(185)),E=n(30),b=n(50),g=(n(4),[{id:"nom_res",align:"left",disablePadding:!1,label:"Nom",sort:!0},{id:"adresse_res",align:"left",disablePadding:!1,label:"Adresse",sort:!0},{id:"SIREN",align:"left",disablePadding:!1,label:"SIREN",sort:!0},{id:"contact_tel",align:"left",disablePadding:!1,label:"T\xe9l\xe9phone",sort:!0},{id:"contact_email",align:"left",disablePadding:!1,label:"Email",sort:!0},{id:"actions",align:"left",disablePadding:!1,label:"Actions",sort:!0}]),x=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={selectedProductsMenu:null},n.openSelectedProductsMenu=function(e){n.setState({selectedProductsMenu:e.currentTarget})},n.closeSelectedProductsMenu=function(){n.setState({selectedProductsMenu:null})},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),n=e.orderBy;e.numSelected,e.rowCount,e.classes,this.state.selectedProductsMenu;return s.a.createElement(m.Y,null,s.a.createElement(m.Z,{className:"h-64"},g.map(function(e){return s.a.createElement(m.X,{key:e.id,align:e.align,padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&t},e.sort&&s.a.createElement(m.eb,{title:"Sort",placement:"right"===e.align?"bottom-end":"bottom-start",enterDelay:300},s.a.createElement(m.ab,{active:n===e.id,direction:t},e.label)))},this)))}}]),t}(s.a.Component),y=Object(b.withStyles)(function(e){return{actionsButtonWrapper:{background:e.palette.background.paper}}},{withTheme:!0})(x),v=n(1447),j=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={statusSwitchEl:null,chatsMoreMenuEl:null},n.handleClick=function(e){console.log(e),n.props.EditR\u00e9seauItem(e)},n.chatsMoreMenuClose=function(e){n.setState({chatsMoreMenuEl:null})},n.chatsMoreMenuClick=function(e){n.setState({chatsMoreMenuEl:e.currentTarget})},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllR\u00e9seaux()}},{key:"render",value:function(){var e=this,t=(this.props.auth,this.props.r\u00e9seaux||[]),n=this.state.chatsMoreMenuEl;return s.a.createElement("div",{className:"w-full flex flex-col",delay:1e3},s.a.createElement(u.a,{animation:"transition.slideUpBigIn",delay:300},s.a.createElement(m.V,null,s.a.createElement(u.a,{animation:"transition.slideUpBigIn",delay:300},s.a.createElement(y,null)),s.a.createElement(u.a,{animation:"transition.whirlIn",delay:400},s.a.createElement(m.W,null,t.map(function(t){var a;return s.a.createElement(m.Z,{className:"h-64",hover:!0},s.a.createElement(m.X,{component:"th",scope:"row",align:"left"},t.nom_res),s.a.createElement(m.X,{className:"truncate",component:"th",scope:"row",align:"left"},t.adresse_res),s.a.createElement(m.X,{component:"th",scope:"row",align:"left"},t.SIREN),s.a.createElement(m.X,{component:"th",scope:"row",align:"left"},t.contact_tel),s.a.createElement(m.X,{component:"th",scope:"row",align:"left"},t.contact_email),s.a.createElement(m.X,null,s.a.createElement("div",null,s.a.createElement(m.x,{"aria-owns":n?"chats-more-menu":null,"aria-haspopup":"true",onClick:e.chatsMoreMenuClick},s.a.createElement(m.w,null,"more_vert")),s.a.createElement(m.H,{id:"chats-more-menu",anchorEl:n,open:Boolean(n),onClose:e.chatsMoreMenuClose},s.a.createElement(m.I,{onClick:e.chatsMoreMenuClose},s.a.createElement(m.F,{className:"pl-0",primary:"Supprimer",onClick:function(){e.props.removeR\u00e9seau(t.id)}}),s.a.createElement(m.w,{onClick:function(){e.props.removeR\u00e9seau(t.id)},className:"text-red text-20",align:"right"},"remove_circle")),s.a.createElement(m.I,{onClick:e.chatsMoreMenuClose},s.a.createElement(m.F,(a={className:"pl-0",primary:"Modifier",onClick:function(){e.handleClick(t)}},Object(d.a)(a,"className","text-blue text-20"),Object(d.a)(a,"component",E.a),Object(d.a)(a,"to","/formreseau/"+t.id+"/"+t.nom_res),a)),s.a.createElement(m.w,{onClick:function(){e.handleClick(t)},className:"text-blue text-20",component:E.a,to:"/formreseau/"+t.id+"/"+t.nom_res,align:"right"},"edit_circle"))))))}))))))}}]),t}(i.Component),O=Object(h.e)(Object(f.b)(function(e){return{"allR\xe9seaux":e.r\u00e9seauReducer.allR\u00e9seaux,"r\xe9seaux":e.firestore.ordered.r\u00e9seaux,auth:e.firebase.auth}},{"getAllR\xe9seaux":v.d,"getAllR\xe9seauxSuccess":v.e,"removeR\xe9seau":v.f,"EditR\xe9seauItem":v.a,OpenRemoveReseau:v.b}),Object(p.firestoreConnect)([{collection:"r\xe9seaux"}]))(j),w=Object(f.b)(function(e){return{mainTheme:e.fuse.settings.mainTheme}})(function(e){e.setSearchText,e.searchText,e.mainTheme,e.props;return s.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(u.a,{animation:"transition.expandIn",delay:300},s.a.createElement(m.w,{className:"text-32 mr-0 sm:mr-12"},"shopping_basket")),s.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},s.a.createElement(m.fb,{className:"hidden sm:flex",variant:"h6"},"R\xe9seaux"))),s.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},s.a.createElement(m.c,{component:E.a,to:"/mapr\xe9seau",color:"secondary",variant:"contained"},s.a.createElement("span",{className:"hidden sm:flex"},"Voir les animations en map"))),s.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},s.a.createElement(m.c,{component:E.a,to:"/formreseau/r\xe9seau",className:"whitespace-no-wrap",variant:"contained"},s.a.createElement("span",{className:"hidden sm:flex"},"Ajouter R\xe9seau"))))}),M=n(82),C=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.props.auth.uid?s.a.createElement(u.m,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:s.a.createElement(w,null),content:s.a.createElement(O,null),innerScroll:!0}):s.a.createElement(M.a,{to:"/Login"})}}]),t}(i.Component);t.default=Object(h.e)(Object(f.b)(function(e){return{"r\xe9seaux":e.firestore.ordered.r\u00e9seaux,auth:e.firebase.auth}},null),Object(p.firestoreConnect)([{collection:"r\xe9seaux"}]))(C)}}]);