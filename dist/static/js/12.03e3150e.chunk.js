(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1451:function(e,t,a){"use strict";a.d(t,"c",function(){return c}),a.d(t,"g",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return d}),a.d(t,"e",function(){return f}),a.d(t,"f",function(){return h}),a.d(t,"a",function(){return g}),a.d(t,"h",function(){return v});var n=a(5),r=a(31),o=(a(419),a(56)),i=a.n(o),s=a(93),l=a(24),c=function(e){return function(t){i.a.auth().onAuthStateChanged(function(a){a&&(console.log(a.uid),i.a.firestore().collection("users").doc(a.uid).get().then(function(o){console.log(o.data());var i=o.data().displayName;console.log(i);var s={uid:a.uid,displayName:i},l=r.a.firestore().collection("magasins").doc().id;r.a.firestore().collection("magasins").doc(l).set(Object(n.a)({},e,{id:l,authorName:s.displayName,authorId:s.uid,createdAt:new Date})).then(function(){t({type:"Add_MAGASIN"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},u=function(e){return function(t){r.a.firestore().collection("magasins").doc(e).delete().then(function(e){e||s.a.dispatch(l.j({message:"Ce magasin a \xe9t\xe9 supprim\xe9 aves succ\xe8s"}))})}},m=function(){return{type:"OPEN_DIALOG_MAGASIN"}};function d(){return{type:"CLOSE_DIALOG_MAGASIN"}}var p=[],f=function(){return function(e){r.a.firestore().collection("magasins").get().then(function(t){return t.forEach(function(e){var t=Object(n.a)({},e.data(),{id:e.id});p.push(t)}),e(h(p)),p}).catch(function(e){console.error("Error writing document: ",e)})}},h=function(e){return{type:"GET_ALL_MAGASINS_SUCCESS",payload:e}};function g(e){return{type:"EDIT_MAGASIN_ITEM",magasin:e}}var v=function(e){return function(t){r.a.firestore().collection("magasins").doc(e.id).update(Object(n.a)({},e)).then(function(){t({type:"UPDATE_MAGASINS"})}).catch(function(e){console.error("Error updating document: ",e)})}}},1463:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=l(r),i=l(a(38)),s=l(a(4));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u="Select...",m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:a.parseValue(e.value,e.options)||{label:"undefined"===typeof e.placeholder?u:e.placeholder,value:""},isOpen:!1},a.mounted=!0,a.handleDocumentClick=a.handleDocumentClick.bind(a),a.fireChangeEvent=a.fireChangeEvent.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),n(t,[{key:"componentWillReceiveProps",value:function(e){if(e.value){var t=this.parseValue(e.value,e.options);t!==this.state.selected&&this.setState({selected:t})}else this.setState({selected:{label:"undefined"===typeof e.placeholder?u:e.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(e){this.props.onFocus&&"function"===typeof this.props.onFocus&&this.props.onFocus(this.state.isOpen),"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(e,t){var a=void 0;if("string"===typeof e)for(var n=0,r=t.length;n<r;n++)if("group"===t[n].type){var o=t[n].items.filter(function(t){return t.value===e});o.length&&(a=o[0])}else"undefined"!==typeof t[n].value&&t[n].value===e&&(a=t[n]);return a||e}},{key:"setValue",value:function(e,t){var a={selected:{value:e,label:t},isOpen:!1};this.fireChangeEvent(a),this.setState(a)}},{key:"fireChangeEvent",value:function(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}},{key:"renderOption",value:function(e){var t,a=e.value;"undefined"===typeof a&&(a=e.label||e);var n=e.label||e.value||e,r=a===this.state.selected.value||a===this.state.selected,i=(c(t={},this.props.baseClassName+"-option",!0),c(t,e.className,!!e.className),c(t,"is-selected",r),t),l=(0,s.default)(i);return o.default.createElement("div",{key:a,className:l,onMouseDown:this.setValue.bind(this,a,n),onClick:this.setValue.bind(this,a,n),role:"option","aria-selected":r?"true":"false"},n)}},{key:"buildMenu",value:function(){var e=this,t=this.props,a=t.options,n=t.baseClassName,r=a.map(function(t){if("group"===t.type){var a=o.default.createElement("div",{className:n+"-title"},t.name),r=t.items.map(function(t){return e.renderOption(t)});return o.default.createElement("div",{className:n+"-group",key:t.name,role:"listbox",tabIndex:"-1"},a,r)}return e.renderOption(t)});return r.length?r:o.default.createElement("div",{className:n+"-noresults"},"No options found")}},{key:"handleDocumentClick",value:function(e){this.mounted&&(i.default.findDOMNode(this).contains(e.target)||this.state.isOpen&&this.setState({isOpen:!1}))}},{key:"isValueSelected",value:function(){return"string"===typeof this.state.selected||""!==this.state.selected.value}},{key:"render",value:function(){var e,t,a,n,r,i=this.props,l=i.baseClassName,u=i.controlClassName,m=i.placeholderClassName,d=i.menuClassName,p=i.arrowClassName,f=i.arrowClosed,h=i.arrowOpen,g=i.className,v=this.props.disabled?"Dropdown-disabled":"",b="string"===typeof this.state.selected?this.state.selected:this.state.selected.label,E=(0,s.default)((c(e={},l+"-root",!0),c(e,g,!!g),c(e,"is-open",this.state.isOpen),e)),y=(0,s.default)((c(t={},l+"-control",!0),c(t,u,!!u),c(t,v,!!v),t)),M=(0,s.default)((c(a={},l+"-placeholder",!0),c(a,m,!!m),c(a,"is-selected",this.isValueSelected()),a)),C=(0,s.default)((c(n={},l+"-menu",!0),c(n,d,!!d),n)),O=(0,s.default)((c(r={},l+"-arrow",!0),c(r,p,!!p),r)),_=o.default.createElement("div",{className:M},b),k=this.state.isOpen?o.default.createElement("div",{className:C,"aria-expanded":"true"},this.buildMenu()):null;return o.default.createElement("div",{className:E},o.default.createElement("div",{className:y,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},_,o.default.createElement("div",{className:l+"-arrow-wrapper"},h&&f?this.state.isOpen?h:f:o.default.createElement("span",{className:O}))),k)}}]),t}();m.defaultProps={baseClassName:"Dropdown"},t.default=m},1570:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),i=a(5),s=a(11),l=a(12),c=a(14),u=a(13),m=a(15),d=a(1),p=a(1463),f=a.n(p),h=a(21),g=a(18),v=a(9),b=a(185),E=a(30),y=a(50),M=(a(4),[{id:"nom_mag",align:"left",disablePadding:!1,label:"Nom",sort:!0},{id:"adresse_mag",align:"left",disablePadding:!1,label:"Adresse",sort:!0},{id:"r\xe9seau_mag",align:"left",disablePadding:!1,label:"R\xe9seaux",sort:!0},{id:"marques_mag",align:"left",disablePadding:!1,label:"Marques",sort:!0},{id:"actions",align:"left",disablePadding:!1,label:"Actions",sort:!0}]),C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedProductsMenu:null},a.openSelectedProductsMenu=function(e){a.setState({selectedProductsMenu:e.currentTarget})},a.closeSelectedProductsMenu=function(){a.setState({selectedProductsMenu:null})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),a=e.orderBy;e.numSelected,e.rowCount,e.classes,this.state.selectedProductsMenu;return r.a.createElement(d.Y,null,r.a.createElement(d.Z,{className:"h-64"},M.map(function(e){return r.a.createElement(d.X,{key:e.id,align:e.align,padding:e.disablePadding?"none":"default",sortDirection:a===e.id&&t},e.sort&&r.a.createElement(d.eb,{title:"Sort",placement:"right"===e.align?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(d.ab,{active:a===e.id,direction:t},e.label)))},this)))}}]),t}(r.a.Component),O=Object(y.withStyles)(function(e){return{actionsButtonWrapper:{background:e.palette.background.paper}}},{withTheme:!0})(C),_=a(1451),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={statusSwitchEl:null,chatsMoreMenuEl:null,marque_mag:"","r\xe9seau_mag":"",searchText:""},a.handleClick=function(e){console.log(e),a.props.EditMagasinItem(e)},a.chatsMoreMenuClose=function(e){a.setState({chatsMoreMenuEl:null})},a.chatsMoreMenuClick=function(e){a.setState({chatsMoreMenuEl:e.currentTarget})},a.handleChipChangeMarques=function(e,t){a.setState({marque_mag:v.a.set(Object(i.a)({},a.state.marque_mag),t,e.map(function(e){return e.value}))})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllMagasins()}},{key:"render",value:function(){var e=this,t=this.state.chatsMoreMenuEl,a=this.props.magasins||[];this.props.r\u00e9seaux,a.map(function(e,t){return console.log(e.marque_mag.marques),e.marque_mag.marques}).map(function(e){return{value:e,label:e}}),a.map(function(e){return r.a.createElement("option",{key:e.id}," ",e.marque_mag.marques," ")});return r.a.createElement("div",{className:"w-full flex flex-col",delay:1e3},r.a.createElement(o.a,{animation:"transition.slideUpBigIn",delay:300},r.a.createElement(d.V,null,r.a.createElement(o.a,{animation:"transition.slideUpBigIn",delay:300},r.a.createElement(O,null)),r.a.createElement(o.a,{animation:"transition.whirlIn",delay:400},r.a.createElement(d.W,null,a.map(function(n){return r.a.createElement(d.Z,{className:"h-64",hover:!0},r.a.createElement(d.X,{component:"th",scope:"row",align:"left"},n.nom_mag),r.a.createElement(d.X,{className:"truncate",component:"th",scope:"row",align:"left"},n.adresse_mag),r.a.createElement(d.X,{component:"th",scope:"row",align:"left"},r.a.createElement(f.a,{placeholder:"Cliquez ici pour voir les r\xe9seaux",fluid:!0,search:!0,selection:!0,multiple:!0,options:a.map(function(e,t){return r.a.createElement("option",{key:n.id},n.r\u00e9seau_mag.r\u00e9seaux[t])})})),r.a.createElement(d.X,{component:"th",scope:"row",align:"left"},r.a.createElement(f.a,{placeholder:"Cliquez ici pour voir les marques",fluid:!0,search:!0,selection:!0,multiple:!0,options:a.map(function(e,t){return r.a.createElement("div",{key:n.id},n.marque_mag.marques[t])})})),r.a.createElement(d.X,null,r.a.createElement("div",null,r.a.createElement(d.x,{"aria-owns":t?"chats-more-menu":null,"aria-haspopup":"true",onClick:e.chatsMoreMenuClick},r.a.createElement(d.w,null,"more_vert")),r.a.createElement(d.H,{id:"chats-more-menu",anchorEl:t,open:Boolean(t),onClose:e.chatsMoreMenuClose},r.a.createElement(d.I,{onClick:e.chatsMoreMenuClose},r.a.createElement(d.F,{className:"pl-0",primary:"Supprimer",onClick:function(){e.props.removeMagasin(n.id)}}),r.a.createElement(d.w,{onClick:function(){e.props.removeMagasin(n.id)},className:"text-red text-20",align:"right"},"remove_circle")),r.a.createElement(d.I,{onClick:e.chatsMoreMenuClose},r.a.createElement(d.F,{className:"pl-0",primary:"Modifier",onClick:function(){e.handleClick(n)},component:E.a,to:"/formmagasin/"+n.id+"/"+n.nom_mag}),r.a.createElement(d.w,{onClick:function(){e.handleClick(n)},className:"text-blue text-20",component:E.a,to:"/formmagasin/"+n.id+"/"+n.nom_mag,align:"right"},"edit_circle"))))))}))))))}}]),t}(n.Component),w=Object(g.e)(Object(h.b)(function(e){return{allMagasins:e.magasinReducer.allMagasins,magasins:e.firestore.ordered.magasins,auth:e.firebase.auth}},{getAllMagasins:_.e,getAllMagasinsSuccess:_.f,removeMagasin:_.g,EditMagasinItem:_.a,OpenRemoveMagasin:_.b}),Object(b.firestoreConnect)([{collection:"magasins"}]))(k),N=Object(h.b)(function(e){return{mainTheme:e.fuse.settings.mainTheme}})(function(e){e.setSearchText,e.searchText,e.mainTheme,e.props;return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(o.a,{animation:"transition.expandIn",delay:300},r.a.createElement(d.w,{className:"text-32 mr-0 sm:mr-12"},"shopping_basket")),r.a.createElement(o.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(d.fb,{className:"hidden sm:flex",variant:"h6"},"Magasins"))),r.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(d.c,{component:E.a,to:"/mapmagasin",color:"secondary",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Voir les animations en map"))),r.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(d.c,{component:E.a,to:"/formmagasin/magasin",className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Ajouter Magasin"))))}),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",nom_mag:"",adresse_mag:"","r\xe9seau_mag":"",marque_mag:""},a.updateMagasinState=function(){var e=a.props.magasinItem;a.setState({id:e.id,nom_mag:e.nom_mag,adresse_mag:e.adresse_mag,"r\xe9seau_mag":e.r\u00e9seau_mag,marque_mag:e.marque_mag})},a.closeDialog=function(){a.props.closeDialogMagasin()},a.handleSubmit=function(){console.log(a.state);var e=a.props.magasinItem;a.props.removeMagasin(e.id)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateMagasinState(),console.log("je trouve",this.props.magasinItem)}},{key:"render",value:function(){var e=this.props,t=e.todoDialog,a=e.magasinItem;return r.a.createElement(d.j,Object.assign({},t.props,{onClose:this.closeDialog}),r.a.createElement(d.a,{position:"static"},r.a.createElement(d.db,null,r.a.createElement(d.fb,{color:"inherit"},"\xcates-vous s\xfbr de vouloir supprimer ",a.nom_mag," ?"))),r.a.createElement(d.k,{className:"justify-center"},r.a.createElement(d.x,{color:"secondary",onClick:this.handleSubmit},r.a.createElement(d.w,null,"done")),r.a.createElement(d.x,{color:"primary",onClick:this.closeDialog},r.a.createElement(d.w,null,"close"))))}}]),t}(n.Component),S=Object(h.b)(function(e){return console.log("Item",e),{todoDialog:e.magasinReducer.todoDialog,magasinItem:e.magasinReducer.magasinItem,magasins:e.firestore.ordered.magasins}},{removeMagasin:_.g,closeDialogMagasin:_.d})(j);t.default=Object(g.e)(Object(h.b)(function(e){return{magasins:e.firestore.ordered.magasins,auth:e.firebase.auth}},null),Object(b.firestoreConnect)([{collection:"magasins"}]))(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.m,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(N,null),content:r.a.createElement(w,null),innerScroll:!0}),r.a.createElement(S,null))})}}]);