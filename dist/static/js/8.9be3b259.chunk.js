(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1446:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(31),i=function(){return function(e){n.a.auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})}}},1460:function(e,t,a){"use strict";a.d(t,"c",function(){return m}),a.d(t,"g",function(){return u}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return d}),a.d(t,"e",function(){return h}),a.d(t,"f",function(){return f}),a.d(t,"a",function(){return E}),a.d(t,"h",function(){return v});var n=a(5),i=a(31),r=(a(419),a(56)),o=a.n(r),l=a(93),c=a(24),m=function(e){return function(t){o.a.auth().onAuthStateChanged(function(a){a&&(console.log(a.uid),o.a.firestore().collection("users").doc(a.uid).get().then(function(r){console.log(r.data());var o=r.data().displayName;console.log(o);var l={uid:a.uid,displayName:o},c=i.a.firestore().collection("animateurs").doc().id;i.a.firestore().collection("animateurs").doc(c).set(Object(n.a)({},e,{id:c,authorName:l.displayName,authorId:l.uid,createdAt:new Date})).then(function(){t({type:"Add_ANIMATEUR"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},u=function(e){return function(t){i.a.firestore().collection("animateurs").doc(e).delete().then(function(e){e||l.a.dispatch(c.j({message:"Cet animateur a \xe9t\xe9 supprim\xe9"}))})}},s=function(){return{type:"OPEN_DIALOG_ANIMATEUR"}};function d(){return{type:"CLOSE_DIALOG_ANIMATEUR"}}var p=[],h=function(){return function(e){i.a.firestore().collection("animateurs").get().then(function(t){return t.forEach(function(e){var t=Object(n.a)({},e.data(),{id:e.id});p.push(t)}),e(f(p)),p}).catch(function(e){console.error("Error writing document: ",e)})}},f=function(e){return{type:"GET_ALL_ANIMATEURS_SUCCESS",payload:e}};function E(e){return{type:"EDIT_ANIMATEUR_ITEM",animateur:e}}var v=function(e){return function(t){i.a.firestore().collection("animateurs").doc(e.id).update(Object(n.a)({},e)).then(function(){t({type:"UPDATE_ANIMATEUR"})}).catch(function(e){console.error("Error updating document: ",e)})}}},1548:function(e,t,a){"use strict";a.r(t);var n=a(34),i=a(11),r=a(12),o=a(14),l=a(13),c=a(15),m=a(0),u=a.n(m),s=a(1),d=a(16),p=a(82),h=a(30),f=(a(9),a(21)),E=a(1460),v=a(1446),b=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),m=0;m<r;m++)c[m]=arguments[m];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={id:"","pr\xe9nom":"",nom:"",email:"","t\xe9l\xe9phone":"",qualification:""},a.updateAnimateurState=function(){var e=a.props.match.params.animateurId;if("animateur"===e)a.setState({id:"","pr\xe9nom":"",nom:"",email:"","t\xe9l\xe9phone":"",qualification:""});else{var t=a.props.animateurItem;a.setState({id:e,"pr\xe9nom":t.pr\u00e9nom,nom:t.nom,email:t.email,"t\xe9l\xe9phone":t.t\u00e9l\u00e9phone,qualification:t.qualification})}},a.handleSaveAnimateur=function(){a.props.addAnimateur(a.state),a.setState({id:"","pr\xe9nom":"",nom:"",email:"","t\xe9l\xe9phone":"",qualification:""})},a.handleUpdateAnimateur=function(){a.props.updateAnimateur(a.state),a.setState({id:"","pr\xe9nom":"",nom:"",email:"","t\xe9l\xe9phone":"",qualification:""})},a.handleChange=function(e){a.setState(Object(n.a)({},e.target.id,e.target.value))},a.handleSignOut=function(){a.props.signOut()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateAnimateurState(),console.log("je trouve",this.props.animateurItem)}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.match.params.animateurId;if("edit"===n){var i=this.props.animateurItem;this.setState({id:n,"pr\xe9nom":i.pr\u00e9nom,nom:i.nom,email:i.email,"t\xe9l\xe9phone":i.t\u00e9l\u00e9phone,qualification:i.qualification})}}},{key:"render",value:function(){var e=this.props.auth;return console.log(e),e.uid?u.a.createElement(d.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:u.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},u.a.createElement("div",{className:"flex flex-col items-start max-w-full"},u.a.createElement(d.a,{animation:"transition.slideRightIn",delay:300},u.a.createElement(s.fb,{className:"normal-case flex items-center sm:mb-12",component:h.a,role:"button",to:"/animateurs"},u.a.createElement(s.w,{className:"mr-4 text-20"},"arrow_back"),"Animateurs")),u.a.createElement("div",{className:"flex items-center max-w-full"},u.a.createElement("div",{className:"flex flex-col min-w-0"},u.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(s.fb,{className:"text-16 sm:text-20 truncate"},this.state.pr\u00e9nom?this.state.pr\u00e9nom:"New Animateur")),u.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(s.fb,{variant:"caption"},"Animateur Details"))))),u.a.createElement("div",null,u.a.createElement(d.a,{animation:"transition.slideRightIn",delay:300},"animateur"===this.props.match.params.animateurId?u.a.createElement(s.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleSaveAnimateur},"Save"):u.a.createElement(s.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleUpdateAnimateur,component:h.a,to:"/animateurs"},"Update")),u.a.createElement(d.a,{animation:"transition.perspectiveDownIn",delay:500},u.a.createElement(s.c,{onClick:this.handleSignOut,component:h.a,to:"/Login"},"Log Out")))),contentToolbar:u.a.createElement("div",{className:"px-24"},u.a.createElement(d.a,{animation:"transition.perspectiveUpIn",delay:500},"new"===this.props.match.params.animationId?u.a.createElement("h4",null," Nouvelle Animateur "):u.a.createElement("h4",null," Animateur details "))),content:u.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},u.a.createElement("form",null,u.a.createElement(d.a,{animation:"transition.bounceUpIn",delay:1200},u.a.createElement(s.cb,{value:this.state.pr\u00e9nom,id:"pr\xe9nom",label:"Pr\xe9nom",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"pr\xe9nom",fullWidth:!0,required:!0})),u.a.createElement(d.a,{animation:"transition.bounceUpIn",delay:1e3},u.a.createElement(s.cb,{className:"mt-8 mb-16",id:"nom",name:"nom",onChange:this.handleChange,label:"Nom",type:"text",value:this.state.nom,multiline:!0,rows:5,variant:"outlined",fullWidth:!0})),u.a.createElement(d.a,{animation:"transition.bounceUpIn",delay:800},u.a.createElement(s.cb,{className:"mt-8 mb-16",id:"email",name:"email",onChange:this.handleChange,label:"Email",type:"text",value:this.state.email,variant:"outlined",fullWidth:!0})),u.a.createElement(d.a,{animation:"transition.bounceUpIn",delay:600},u.a.createElement(s.cb,{className:"mt-8 mb-16",id:"t\xe9l\xe9phone",name:"t\xe9l\xe9phone",onChange:this.handleChange,label:"T\xe9l\xe9phone",type:"text",value:this.state.t\u00e9l\u00e9phone,variant:"outlined",fullWidth:!0})),u.a.createElement(d.a,{animation:"transition.bounceUpIn",delay:400},u.a.createElement(s.cb,{className:"mt-8 mb-16",id:"qualification",name:"qualification",onChange:this.handleChange,label:"Qualification",type:"text",value:this.state.qualification,variant:"outlined",fullWidth:!0})))),innerScroll:!0}):u.a.createElement(p.a,{to:"/Login"})}}]),t}(m.Component);t.default=Object(f.b)(function(e){return console.log(e),{allAnimateurs:e.animateurReducer.allAnimateurs,animateurs:e.firestore.ordered.animateurs,animateurItem:e.animateurReducer.animateurItem,auth:e.firebase.auth}},{addAnimateur:E.c,getAllAnimateurs:E.e,updateAnimateur:E.h,signOut:v.a})(b)}}]);