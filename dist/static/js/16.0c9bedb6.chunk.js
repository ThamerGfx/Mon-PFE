(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1460:function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"g",function(){return s}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"a",function(){return E}),n.d(t,"h",function(){return g});var a=n(5),r=n(31),o=(n(419),n(56)),i=n.n(o),l=n(93),c=n(24),u=function(e){return function(t){i.a.auth().onAuthStateChanged(function(n){n&&(console.log(n.uid),i.a.firestore().collection("users").doc(n.uid).get().then(function(o){console.log(o.data());var i=o.data().displayName;console.log(i);var l={uid:n.uid,displayName:i},c=r.a.firestore().collection("animateurs").doc().id;r.a.firestore().collection("animateurs").doc(c).set(Object(a.a)({},e,{id:c,authorName:l.displayName,authorId:l.uid,createdAt:new Date})).then(function(){t({type:"Add_ANIMATEUR"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},s=function(e){return function(t){r.a.firestore().collection("animateurs").doc(e).delete().then(function(e){e||l.a.dispatch(c.j({message:"Cet animateur a \xe9t\xe9 supprim\xe9"}))})}},m=function(){return{type:"OPEN_DIALOG_ANIMATEUR"}};function d(){return{type:"CLOSE_DIALOG_ANIMATEUR"}}var p=[],f=function(){return function(e){r.a.firestore().collection("animateurs").get().then(function(t){return t.forEach(function(e){var t=Object(a.a)({},e.data(),{id:e.id});p.push(t)}),e(h(p)),p}).catch(function(e){console.error("Error writing document: ",e)})}},h=function(e){return{type:"GET_ALL_ANIMATEURS_SUCCESS",payload:e}};function E(e){return{type:"EDIT_ANIMATEUR_ITEM",animateur:e}}var g=function(e){return function(t){r.a.firestore().collection("animateurs").doc(e.id).update(Object(a.a)({},e)).then(function(){t({type:"UPDATE_ANIMATEUR"})}).catch(function(e){console.error("Error updating document: ",e)})}}},1568:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n(11),l=n(12),c=n(14),u=n(13),s=n(15),m=n(1),d=n(21),p=n(18),f=(n(9),n(185)),h=n(82),E=n(30),g=n(50),b=(n(4),[{id:"pr\xe9nom",align:"left",disablePadding:!1,label:"Pr\xe9nom",sort:!0},{id:"nom",align:"left",disablePadding:!1,label:"Nom",sort:!0},{id:"email",align:"left",disablePadding:!1,label:"Email",sort:!0},{id:"t\xe9l\xe9phone",align:"left",disablePadding:!1,label:"T\xe9l\xe9phone",sort:!0},{id:"qualification",align:"left",disablePadding:!1,label:"Qualification",sort:!0},{id:"actions",align:"left",disablePadding:!1,label:"Actions",sort:!0}]),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedProductsMenu:null},n.openSelectedProductsMenu=function(e){n.setState({selectedProductsMenu:e.currentTarget})},n.closeSelectedProductsMenu=function(){n.setState({selectedProductsMenu:null})},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSelectAllClick,e.order),n=e.orderBy;e.numSelected,e.rowCount,e.classes,this.state.selectedProductsMenu;return r.a.createElement(m.Y,null,r.a.createElement(m.Z,{className:"h-64"},b.map(function(e){return r.a.createElement(m.X,{key:e.id,align:e.align,padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&t},e.sort&&r.a.createElement(m.eb,{title:"Sort",placement:"right"===e.align?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(m.ab,{active:n===e.id,direction:t},e.label)))},this)))}}]),t}(r.a.Component),v=Object(g.withStyles)(function(e){return{actionsButtonWrapper:{background:e.palette.background.paper}}},{withTheme:!0})(A),y=n(1460),C=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={statusSwitchEl:null,chatsMoreMenuEl:null,searchText:""},n.handleClick=function(e){console.log(e),n.props.EditAnimateurItem(e)},n.chatsMoreMenuClose=function(e){n.setState({chatsMoreMenuEl:null})},n.chatsMoreMenuClick=function(e){n.setState({chatsMoreMenuEl:e.currentTarget})},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllAnimateurs()}},{key:"render",value:function(){var e=this,t=this.state.chatsMoreMenuEl;if(!this.props.auth.uid)return r.a.createElement(h.a,{to:"/Login"});var n=this.props.animateurs||[];return r.a.createElement("div",{className:"w-full flex flex-col",delay:1e3},r.a.createElement(o.a,{animation:"transition.slideUpBigIn",delay:300},r.a.createElement(m.V,{fullWidth:!0,className:"min-w-xl","aria-labelledby":"tableTitle"},r.a.createElement(o.a,{animation:"transition.slideUpBigIn",delay:300},r.a.createElement(v,null)),r.a.createElement(o.a,{animation:"transition.whirlIn",delay:400,className:"flex-grow overflow-x-auto"},r.a.createElement(m.W,null,n.map(function(n){return r.a.createElement(m.Z,{className:"h-64",hover:!0},r.a.createElement(m.X,{component:"th",scope:"row",align:"left"},n.pr\u00e9nom),r.a.createElement(m.X,{className:"truncate",component:"th",scope:"row",align:"left"},n.nom),r.a.createElement(m.X,{component:"th",scope:"row",align:"left"},n.email),r.a.createElement(m.X,{component:"th",scope:"row",align:"left"},n.t\u00e9l\u00e9phone),r.a.createElement(m.X,{component:"th",scope:"row",align:"left"},n.qualification),r.a.createElement(m.X,null,r.a.createElement("div",null,r.a.createElement(m.x,{"aria-owns":t?"chats-more-menu":null,"aria-haspopup":"true",onClick:e.chatsMoreMenuClick},r.a.createElement(m.w,null,"more_vert")),r.a.createElement(m.H,{id:"chats-more-menu",anchorEl:t,open:Boolean(t),onClose:e.chatsMoreMenuClose},r.a.createElement(m.I,{onClick:e.chatsMoreMenuClose},r.a.createElement(m.F,{className:"pl-0",primary:"Supprimer",onClick:function(){e.props.OpenRemoveAnimateur(n.id),e.handleClick(n)}}),r.a.createElement(m.w,{onClick:function(){e.props.OpenRemoveAnimateur(n.id),e.handleClick(n)},className:"text-red text-20",align:"right"},"remove_circle")),r.a.createElement(m.I,{onClick:e.chatsMoreMenuClose},r.a.createElement(m.F,{className:"pl-0",primary:"Modifier",onClick:function(){e.handleClick(n)},component:E.a,to:"/formulaire/"+n.id+"/"+n.pr\u00e9nom}),r.a.createElement(m.w,{onClick:function(){e.handleClick(n)},className:"text-blue text-20",component:E.a,to:"/formulaire/"+n.id+"/"+n.pr\u00e9nom,align:"right"},"edit_circle")),r.a.createElement(m.I,{onClick:e.chatsMoreMenuClose},r.a.createElement(m.F,{className:"pl-0",primary:"Profile",onClick:function(){e.handleClick(n)},component:E.a,to:"/profile/"+n.id+"/"+n.nom}),r.a.createElement(m.w,{onClick:function(){e.handleClick(n)},className:"text-blue text-20",component:E.a,to:"/myprofile/"+n.id+"/"+n.nom,align:"right"},"group"))))))}))))))}}]),t}(a.Component),M=Object(p.e)(Object(d.b)(function(e){return{allAnimateurs:e.animateurReducer.allAnimateurs,animateurs:e.firestore.ordered.animateurs,auth:e.firebase.auth}},{removeAnimateur:y.g,getAllAnimateurs:y.e,getAllAnimateursSuccess:y.f,OpenRemoveAnimateur:y.b,EditAnimateurItem:y.a}),Object(f.firestoreConnect)([{collection:"animateurs"}]))(C),w=Object(d.b)(function(e){return{mainTheme:e.fuse.settings.mainTheme}})(function(e){e.setSearchText,e.searchText,e.mainTheme,e.props;return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(o.a,{animation:"transition.expandIn",delay:300},r.a.createElement(m.w,{className:"text-32 mr-0 sm:mr-12"},"shopping_basket")),r.a.createElement(o.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(m.fb,{className:"hidden sm:flex",variant:"h6"},"Animateurs"))),r.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(m.c,{component:E.a,to:"/formulaire/animateur",className:"whitespace-no-wrap",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"Add Animateur"))))}),O=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:"","pr\xe9nom":"",nom:"",email:"","t\xe9l\xe9phone":"",qualification:""},n.updateAnimateurState=function(){var e=n.props.animateurItem;n.setState({id:e.id,"pr\xe9nom":e.pr\u00e9nom,nom:e.nom,email:e.email,"t\xe9l\xe9phone":e.t\u00e9l\u00e9phone,qualification:e.qualification})},n.closeDialog=function(){n.props.closeDialogAnimateur()},n.handleSubmit=function(){console.log(n.state);var e=n.props.animateurItem;n.props.removeAnimateur(e.id)},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateAnimateurState(),console.log("je trouve",this.props.animateurItem)}},{key:"render",value:function(){var e=this.props,t=e.todoDialog,n=e.animateurItem;return r.a.createElement(m.j,Object.assign({},t.props,{onClose:this.closeDialog}),r.a.createElement(m.a,{position:"static"},r.a.createElement(m.db,null,r.a.createElement(m.fb,{color:"inherit"},"\xcates-vous s\xfbr de vouloir supprimer ",n.pr\u00e9nom," ",n.nom," ?"))),r.a.createElement(m.k,{className:"justify-center"},r.a.createElement(m.x,{color:"secondary",onClick:this.handleSubmit},r.a.createElement(m.w,null,"done")),r.a.createElement(m.x,{color:"primary",onClick:this.closeDialog},r.a.createElement(m.w,null,"close"))))}}]),t}(a.Component),k=Object(d.b)(function(e){return console.log("Item",e),{todoDialog:e.animateurReducer.todoDialog,animateurItem:e.animateurReducer.animateurItem,animateurs:e.firestore.ordered.animateurs}},{removeAnimateur:y.g,closeDialogAnimateur:y.d})(O);t.default=Object(p.e)(Object(d.b)(function(e){return{animateurs:e.firestore.ordered.animateurs}},null),Object(f.firestoreConnect)([{collection:"animateurs"}]))(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.m,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(w,null),content:r.a.createElement(M,null),innerScroll:!0}),r.a.createElement(k,null))})}}]);