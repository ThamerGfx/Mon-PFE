(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1446:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(31),r=function(){return function(e){n.a.auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})}}},1452:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"g",function(){return l}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return d}),a.d(t,"e",function(){return p}),a.d(t,"f",function(){return h}),a.d(t,"a",function(){return q}),a.d(t,"h",function(){return E});var n=a(5),r=a(31),o=(a(419),a(56)),i=a.n(o),u=a(93),c=a(24),s=function(e){return function(t){i.a.auth().onAuthStateChanged(function(a){a&&(console.log(a.uid),i.a.firestore().collection("users").doc(a.uid).get().then(function(o){console.log(o.data());var i=o.data().displayName;console.log(i);var u={uid:a.uid,displayName:i},c=r.a.firestore().collection("marques").doc().id;r.a.firestore().collection("marques").doc(c).set(Object(n.a)({},e,{id:c,authorName:u.displayName,authorId:u.uid,createdAt:new Date})).then(function(){t({type:"Add_MARQUE"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},l=function(e){return function(t){r.a.firestore().collection("marques").doc(e).delete().then(function(e){e||u.a.dispatch(c.j({message:"Cette marque a \xe9t\xe9 supprim\xe9e aves succ\xe8s"}))})}},m=function(){return{type:"OPEN_DIALOG_MARQUE"}},d=function(){return{type:"CLOSE_DIALOG_MARQUE"}},f=[],p=function(){return function(e){r.a.firestore().collection("marques").get().then(function(t){return t.forEach(function(e){var t=Object(n.a)({},e.data(),{id:e.id});f.push(t)}),e(h(f)),f}).catch(function(e){console.error("Error writing document: ",e)})}},h=function(e){return{type:"GET_ALL_MARQUES_SUCCESS",payload:e}};function q(e){return{type:"EDIT_MARQUE_ITEM",marque:e}}var E=function(e){return function(t){r.a.firestore().collection("marques").doc(e.id).update(Object(n.a)({},e)).then(function(){t({type:"UPDATE_MARQUES"})}).catch(function(e){console.error("Error updating document: ",e)})}}},1555:function(e,t,a){"use strict";a.r(t);var n=a(34),r=a(11),o=a(12),i=a(14),u=a(13),c=a(15),s=a(0),l=a.n(s),m=a(1),d=a(16),f=a(82),p=a(30),h=(a(9),a(21)),q=a(1452),E=a(1446),v=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={id:"",nom_marque:""},a.updateMarqueState=function(){var e=a.props.match.params.marqueId;if("marque"===e)a.setState({id:"",nom_marque:""});else{var t=a.props.marqueItem;a.setState({id:e,nom_marque:t.nom_marque})}},a.handleSaveMarque=function(){a.props.addMarque(a.state),a.setState({id:"",nom_marque:""})},a.handleUpdateMarque=function(){a.props.updateMarque(a.state),a.setState({id:"",nom_marque:""})},a.handleChange=function(e){a.setState(Object(n.a)({},e.target.id,e.target.value))},a.handleSignOut=function(){a.props.signOut()},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateMarqueState(),console.log("je trouve",this.props.marqueItem)}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.match.params.marqueId;if("edit"===n){var r=this.props.marqueItem;this.setState({id:n,nom_marque:r.nom_marque})}}},{key:"render",value:function(){return this.props.auth.uid?l.a.createElement(d.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:l.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},l.a.createElement("div",{className:"flex flex-col items-start max-w-full"},l.a.createElement(d.a,{animation:"transition.slideRightIn",delay:300},l.a.createElement(m.fb,{className:"normal-case flex items-center sm:mb-12",component:p.a,role:"button",to:"/marques"},l.a.createElement(m.w,{className:"mr-4 text-20"},"arrow_back"),"Marques")),l.a.createElement("div",{className:"flex items-center max-w-full"},l.a.createElement("div",{className:"flex flex-col min-w-0"},l.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(m.fb,{className:"text-16 sm:text-20 truncate"},this.state.nom_marque?this.state.nom_marque:"Nouvelle Marque")),l.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(m.fb,{variant:"caption"},"Marque Details"))))),l.a.createElement("div",null,l.a.createElement(d.a,{animation:"transition.slideRightIn",delay:300},"marque"===this.props.match.params.marqueId?l.a.createElement(m.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleSaveMarque},"Save"):l.a.createElement(m.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleUpdateMarque,component:p.a,to:"/marques"},"Update")),l.a.createElement(d.a,{animation:"transition.perspectiveDownIn",delay:500},l.a.createElement(m.c,{onClick:this.handleSignOut,component:p.a,to:"/Login"},"Log Out")))),contentToolbar:l.a.createElement("div",{className:"px-24"},l.a.createElement(d.a,{animation:"transition.perspectiveUpIn",delay:500},"marque"===this.props.match.params.marqueId?l.a.createElement("h4",null," Nouvelle Marque "):l.a.createElement("h4",null," Marque details "))),content:l.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},l.a.createElement("form",null,l.a.createElement(d.a,{animation:"transition.bounceUpIn",delay:1200},l.a.createElement(m.cb,{value:this.state.nom_marque,id:"nom_marque",label:"Nom",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"nom_marque",fullWidth:!0,required:!0})))),innerScroll:!0}):l.a.createElement(f.a,{to:"/Login"})}}]),t}(s.Component);t.default=Object(h.b)(function(e){return console.log(e),{allMarques:e.marqueReducer.allMarques,magains:e.firestore.ordered.magains,marqueItem:e.marqueReducer.marqueItem,auth:e.firebase.auth}},{addMarque:q.c,getAllMarques:q.e,updateMarque:q.h,signOut:E.a})(v)}}]);