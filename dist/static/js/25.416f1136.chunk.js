(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1464:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"g",function(){return d}),a.d(t,"c",function(){return m}),a.d(t,"d",function(){return f}),a.d(t,"a",function(){return p}),a.d(t,"h",function(){return h}),a.d(t,"e",function(){return b}),a.d(t,"f",function(){return E});var n=a(5),o=a(31),i=(a(419),a(56)),r=a.n(i),c=a(93),l=a(24),s=function(e){return function(t){r.a.auth().onAuthStateChanged(function(a){a&&(console.log(a.uid),r.a.firestore().collection("users").doc(a.uid).get().then(function(i){console.log(i.data());var r=i.data().displayName;console.log(r);var c={uid:a.uid,displayName:r},l=o.a.firestore().collection("formations").doc().id;o.a.firestore().collection("formations").doc(l).set(Object(n.a)({},e,{id:l,authorId:c.uid,createdAt:new Date})).then(function(){t({type:"Add_FORMATION"})}).catch(function(e){console.error("Error adding document: ",e)})}))})}},d=function(e){return function(t){o.a.firestore().collection("formations").doc(e).delete().then(function(e){e||c.a.dispatch(l.j({message:"Cette formation a \xe9t\xe9 supprim\xe9e"}))})}},u=[],m=function(){return function(e){o.a.firestore().collection("formations").get().then(function(t){return t.forEach(function(e){var t=Object(n.a)({},e.data(),{id:e.id});u.push(t)}),e(f(u)),u}).catch(function(e){console.error("Error writing document: ",e)})}},f=function(e){return{type:"GET_ALL_FORMATIONS_SUCCESS",payload:e}};function p(e){return{type:"EDIT_FORMATION_ITEM",formation:e}}var h=function(e){return function(t){o.a.firestore().collection("formations").doc(e.id).update(Object(n.a)({},e)).then(function(){t({type:"UPDATE_FORMATION"})}).catch(function(e){console.error("Error updating document: ",e)})}};function b(){return{type:"OPEN_EDIT_FORMATION"}}function E(){return console.log("action"),{type:"OPEN_NEW_FORMATION"}}},1561:function(e,t,a){"use strict";a.r(t);var n=a(34),o=a(11),i=a(12),r=a(14),c=a(13),l=a(15),s=a(0),d=a.n(s),u=a(1),m=a(16),f=a(82),p=a(30),h=(a(9),a(21)),b=(a(129),a(422)),E=a.n(b),v=a(1464),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={id:"",titre:"",date:"",client:"","dur\xe9e":""},a.updateFormationState=function(){var e=a.props.match.params.formationId;if("formation"===e)a.setState({id:"",titre:"",date:"",client:"","dur\xe9e":""});else{var t=a.props.formationItem;a.setState({id:e,titre:t.titre,date:t.date,client:t.client,"dur\xe9e":t.dur\u00e9e})}},a.handleChange=function(e){a.setState(Object(n.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){console.log(a.state),a.props.addFormation(a.state),a.setState({id:"",titre:"",date:"",client:"","dur\xe9e":""})},a.handleUpdate=function(){console.log(a.state),a.props.updateFormation(a.state),a.setState({id:"",titre:"",date:"",client:"","dur\xe9e":""})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateFormationState(),console.log("je trouve",this.props.formationItem)}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.match.params.formationId;if("edit"===n){var o=this.props.formationItem;this.setState({id:n,titre:o.titre,date:o.date,client:o.client,"dur\xe9e":o.dur\u00e9e})}}},{key:"render",value:function(){return this.props.auth.uid?d.a.createElement(m.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:d.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},d.a.createElement("div",{className:"flex flex-col items-start max-w-full"},d.a.createElement(m.a,{animation:"transition.slideRightIn",delay:300},d.a.createElement(u.fb,{className:"normal-case flex items-center sm:mb-12",component:p.a,role:"button",to:"/profile"},d.a.createElement(u.w,{className:"mr-4 text-20"},"arrow_back"),"Mes Formations")),d.a.createElement("div",{className:"flex items-center max-w-full"},d.a.createElement("div",{className:"flex flex-col min-w-0"},d.a.createElement(m.a,{animation:"transition.slideLeftIn",delay:300},d.a.createElement(u.fb,{variant:"caption"},"Formation Details"))))),d.a.createElement("div",null,d.a.createElement(m.a,{animation:"transition.slideRightIn",delay:300},"formation"===this.props.match.params.formationId?d.a.createElement(u.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleSubmit},"Save"):d.a.createElement(u.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleUpdate,component:p.a,to:"/profile"},"Update")))),content:d.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},d.a.createElement("form",null,d.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:1200},d.a.createElement(u.cb,{value:this.state.titre,id:"titre",label:"Titre",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"titre",fullWidth:!0,required:!0})),d.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:1e3},d.a.createElement(u.cb,{className:"mt-8 mb-16",id:"client",name:"client",onChange:this.handleChange,label:"Client",type:"text",value:this.state.client,multiline:!0,variant:"outlined",fullWidth:!0,InputProps:{endAdornment:d.a.createElement(E.a,{position:"end"},d.a.createElement(u.w,null,"person_outline"))}})),d.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:800},d.a.createElement(u.cb,{className:"mt-8 mb-16",id:"date",name:"date",onChange:this.handleChange,label:"Date",type:"datetime-local",value:this.state.date,variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0}})),d.a.createElement(m.a,{animation:"transition.bounceUpIn",delay:600},d.a.createElement(u.cb,{className:"mt-8 mb-16",id:"dur\xe9e",name:"dur\xe9e",onChange:this.handleChange,label:"Dur\xe9e",type:"text",value:this.state.dur\u00e9e,variant:"outlined",fullWidth:!0,InputProps:{endAdornment:d.a.createElement(E.a,{position:"end"},d.a.createElement(u.w,null,"watch_later"))}})))),innerScroll:!0}):d.a.createElement(f.a,{to:"/Login"})}}]),t}(s.Component);t.default=Object(h.b)(function(e){return console.log(e),{allFormations:e.formationReducer.allFormations,formations:e.firestore.ordered.formations,formationItem:e.formationReducer.formationItem,auth:e.firebase.auth}},{updateFormation:v.h,addFormation:v.b,getAllFormations:v.c})(g)}}]);