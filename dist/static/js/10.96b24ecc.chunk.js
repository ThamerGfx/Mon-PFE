(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1448:function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"g",function(){return s}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return f}),n.d(e,"f",function(){return h}),n.d(e,"a",function(){return g}),n.d(e,"h",function(){return E});var a=n(5),i=n(31),o=(n(419),n(56)),r=n.n(o),c=n(93),l=n(24),u=function(t){return function(e){r.a.auth().onAuthStateChanged(function(n){n&&(console.log(n.uid),r.a.firestore().collection("users").doc(n.uid).get().then(function(o){console.log(o.data());var r=o.data().displayName;console.log(r);var c={uid:n.uid,displayName:r},l=i.a.firestore().collection("animations").doc().id;i.a.firestore().collection("animations").doc(l).set(Object(a.a)({},t,{id:l,authorName:c.displayName,authorId:c.uid,createdAt:new Date})).then(function(){e({type:"Add_ANIMATION"})}).catch(function(t){console.error("Error adding document: ",t)})}))})}},s=function(t){return function(e){i.a.firestore().collection("animations").doc(t).delete().then(function(t){t||c.a.dispatch(l.j({message:"Cette animation a \xe9t\xe9 supprim\xe9e"}))})}},d=function(){return{type:"OPEN_DIALOG_ANIMATION"}};function m(){return{type:"CLOSE_DIALOG_ANIMATION"}}var p=[],f=function(){return function(t){i.a.firestore().collection("animations").get().then(function(e){return e.forEach(function(t){var e=Object(a.a)({},t.data(),{id:t.id});p.push(e)}),t(h(p)),p}).catch(function(t){console.error("Error writing document: ",t)})}},h=function(t){return{type:"GET_ALL_ANIMATIONS_SUCCESS",payload:t}};function g(t){return{type:"EDIT_ANIMATION_ITEM",animation:t}}var E=function(t){return function(e){i.a.firestore().collection("animations").doc(t.id).update(Object(a.a)({},t)).then(function(){e({type:"UPDATE_ANIMATION"})}).catch(function(t){console.error("Error updating document: ",t)})}}},1449:function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"g",function(){return s}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return f}),n.d(e,"f",function(){return h}),n.d(e,"a",function(){return g}),n.d(e,"h",function(){return E});var a=n(5),i=n(31),o=(n(419),n(56)),r=n.n(o),c=n(93),l=n(24),u=function(t){return function(e){r.a.auth().onAuthStateChanged(function(n){n&&(console.log(n.uid),r.a.firestore().collection("users").doc(n.uid).get().then(function(o){console.log(o.data());var r=o.data().displayName;console.log(r);var c={uid:n.uid,displayName:r},l=i.a.firestore().collection("produits").doc().id;i.a.firestore().collection("produits").doc(l).set(Object(a.a)({},t,{id:l,authorName:c.displayName,authorId:c.uid,createdAt:new Date})).then(function(){e({type:"Add_PRODUIT"})}).catch(function(t){console.error("Error adding document: ",t)})}))})}},s=function(t){return function(e){i.a.firestore().collection("produits").doc(t).delete().then(function(t){t||c.a.dispatch(l.j({message:"Ce produit a \xe9t\xe9 supprim\xe9 avec succ\xe8s"}))})}},d=function(){return{type:"OPEN_DIALOG_PRODUIT"}};function m(){return{type:"CLOSE_DIALOG_PRODUIT"}}var p=[],f=function(){return function(t){i.a.firestore().collection("produits").get().then(function(e){return e.forEach(function(t){var e=Object(a.a)({},t.data(),{id:t.id});p.push(e)}),t(h(p)),p}).catch(function(t){console.error("Error writing document: ",t)})}},h=function(t){return{type:"GET_ALL_PRODUITS_SUCCESS",payload:t}};function g(t){return{type:"EDIT_PRODUIT_ITEM",produit:t}}var E=function(t){return function(e){i.a.firestore().collection("produits").doc(t.id).update(Object(a.a)({},t)).then(function(){e({type:"UPDATE_PRODUITS"})}).catch(function(t){console.error("Error updating document: ",t)})}}},1546:function(t,e,n){"use strict";n.r(e);var a=n(5),i=n(34),o=n(11),r=n(12),c=n(14),l=n(13),u=n(15),s=n(0),d=n.n(s),m=n(1),p=n(16),f=n(82),h=n(30),g=n(185),E=n(9),b=n(21),v=n(18),y=n(1448),I=n(1449),A=n(125),N=function(t){function e(){var t,n;Object(o.a)(this,e);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(u)))).state={id:"",name:"",description:"",typeanim:"",lieu:"",produits:"",nom_prod:"",longitude:"",latitude:""},n.updateAnimationState=function(){var t=n.props.match.params.animationId;if("animation"===t)n.setState({id:"",name:"",description:"",typeanim:"",lieu:"",produits:"",longitude:"",latitude:""});else{var e=n.props.animationItem;n.setState({id:t,name:e.name,description:e.description,typeanim:e.typeanim,lieu:e.lieu,produits:e.produits,longitude:e.longitude,latitude:e.latitude})}},n.handleSaveAnimation=function(){n.props.addAnimation(n.state),n.setState({name:"",description:"",typeanim:"",lieu:"",produits:"",longitude:"",latitude:""})},n.handleUpdateAnimation=function(){n.props.updateAnimation(n.state),n.setState({name:"",description:"",typeanim:"",lieu:"",produits:"",longitude:"",latitude:""})},n.handleChange=function(t){n.setState(Object(i.a)({},t.target.id,t.target.value))},n.handleSignOut=function(){n.props.logoutUser()},n.handleChipChangeProduits=function(t,e){n.setState({nom_prod:E.a.set(Object(a.a)({},n.state.nom_prod),e,t.map(function(t){return t.value}))})},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.updateAnimationState(),console.log("je trouve",this.props.animationItem)}},{key:"componentDidUpdate",value:function(t,e,n){var a=this.props.match.params.animationId;if("edit"===a){var i=this.props.animationItem;this.setState({id:a,name:i.name,description:i.description,typeanim:i.typeanim,lieu:i.lieu,produits:i.produits,longitude:i.longitude,latitude:i.latitude})}}},{key:"render",value:function(){var t=this;if(!this.props.auth.uid)return d.a.createElement(f.a,{to:"/Login"});var e=(this.props.produits||[]).map(function(t){return console.log(t.nom_prod),t.nom_prod}).map(function(t){return{value:t,label:t}});return d.a.createElement(p.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:d.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},d.a.createElement("div",{className:"flex flex-col items-start max-w-full"},d.a.createElement(p.a,{animation:"transition.slideRightIn",delay:300},d.a.createElement(m.fb,{className:"normal-case flex items-center sm:mb-12",component:h.a,role:"button",to:"/animations"},d.a.createElement(m.w,{className:"mr-4 text-20"},"arrow_back"),"Animations")),d.a.createElement("div",{className:"flex items-center max-w-full"},d.a.createElement("div",{className:"flex flex-col min-w-0"},d.a.createElement(p.a,{animation:"transition.slideLeftIn",delay:300},d.a.createElement(m.fb,{className:"text-16 sm:text-20 truncate"},this.state.name?this.state.name:"New Animation")),d.a.createElement(p.a,{animation:"transition.slideLeftIn",delay:300},d.a.createElement(m.fb,{variant:"caption"},"Animation Details"))))),d.a.createElement("div",null,d.a.createElement(p.a,{animation:"transition.slideRightIn",delay:300},"animation"===this.props.match.params.animationId?d.a.createElement(m.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleSaveAnimation},"Save"):d.a.createElement(m.c,{className:"whitespace-no-wrap",variant:"contained",onClick:this.handleUpdateAnimation,component:h.a,to:"/animations"},"Update")),d.a.createElement(p.a,{animation:"transition.perspectiveDownIn",delay:500},d.a.createElement(m.c,{onClick:this.handleSignOut,component:h.a,to:"/Login"},"Log Out")))),contentToolbar:d.a.createElement("div",{className:"px-24"},d.a.createElement(p.a,{animation:"transition.perspectiveUpIn",delay:500},"new"===this.props.match.params.animationId?d.a.createElement("h4",null," Nouvelle Animation "):d.a.createElement("h4",null," Animation details "))),content:d.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},d.a.createElement("form",null,d.a.createElement(p.a,{animation:"transition.bounceUpIn",delay:1200},d.a.createElement(m.cb,{value:this.state.name,id:"name",label:"Name",onChange:this.handleChange,variant:"outlined",margin:"normal",className:"mt-8 mb-16",name:"name",fullWidth:!0,required:!0})),d.a.createElement(p.a,{animation:"transition.bounceUpIn",delay:1e3},d.a.createElement(m.cb,{className:"mt-8 mb-16",id:"description",name:"description",onChange:this.handleChange,label:"Description",type:"text",value:this.state.description,multiline:!0,rows:5,variant:"outlined",fullWidth:!0})),d.a.createElement(p.a,{animation:"transition.bounceUpIn",delay:800},d.a.createElement(m.cb,{className:"mt-8 mb-16",id:"lieu",name:"lieu",onChange:this.handleChange,label:"Lieu",type:"text",value:this.state.lieu,variant:"outlined",fullWidth:!0})),d.a.createElement(p.a,{animation:"transition.bounceUpIn",delay:800},d.a.createElement(m.cb,{className:"mt-8 mb-16",id:"longitude",name:"longitude",onChange:this.handleChange,label:"Longitude",type:"text",value:this.state.longitude,variant:"outlined",fullWidth:!0})),d.a.createElement(p.a,{animation:"transition.bounceUpIn",delay:800},d.a.createElement(m.cb,{className:"mt-8 mb-16",id:"latitude",name:"latitude",onChange:this.handleChange,label:"Latitude",type:"text",value:this.state.latitude,variant:"outlined",fullWidth:!0})),d.a.createElement(p.a,{animation:"transition.bounceUpIn",delay:600},d.a.createElement(m.cb,{className:"mt-8 mb-16",id:"typeanim",name:"typeanim",onChange:this.handleChange,label:"Type",type:"text",value:this.state.typeanim,variant:"outlined",fullWidth:!0})),d.a.createElement(p.d,{className:"mt-8 mb-24",onChange:function(e){return t.handleChipChangeProduits(e,"produits")},placeholder:"Choisissez les produits",textFieldProps:{label:"produits",InputLabelProps:{shrink:!0},variant:"outlined"},options:e,isMulti:!0}))),innerScroll:!0})}}]),e}(s.Component);e.default=Object(v.e)(Object(b.b)(function(t){return console.log(t),{allAnimations:t.myReducer.allAnimations,animations:t.firestore.ordered.animations,animationItem:t.myReducer.animationItem,allProduits:t.produitReducer.allProduits,produits:t.firestore.ordered.produits,auth:t.firebase.auth}},{getAllProduits:I.e,getAllProduitsSuccess:I.f,addAnimation:y.c,getAllAnimations:y.e,updateAnimation:y.h,logoutUser:A.a}),Object(g.firestoreConnect)([{collection:"produits"}]))(N)}}]);